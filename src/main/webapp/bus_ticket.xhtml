<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="utility/general_template.xhtml">

	<ui:define name="content">

		<h:form>


			<p:panel>

				<f:facet name="header">
				 
				 	Refresh
				 	<p:commandButton action="#{busTicketController.refresh()}"
						icon="pi pi-refresh" update="@form" process="@this" />

				</f:facet>

				<h:panelGrid columns="2">

					<p:outputLabel value="Company" />
					<p:inputText value="#{busTicketController.busTicket.company}"
						required="true" />


					<p:outputLabel value="From:" />
					<p:inputText value="#{busTicketController.busTicket.fromPlace}"
						required="true" />

					<p:outputLabel value="To:" />
					<p:inputText value="#{busTicketController.busTicket.toPlace}"
						required="true" />

					<p:outputLabel value="Departure Time:" />
					<p:datePicker
						value="#{busTicketController.busTicket.departureTime}"
						showTime="true" required="true" />

					<p:commandButton value="Save"
						action="#{busTicketController.save()}" update="@form"
						process="@parent" />

				</h:panelGrid>

			</p:panel>

			<br />


			<p:panel>

				<f:facet name="header">
				 	
				 	Show/Refresh Tickets
				 	<p:commandButton action="#{busTicketController.fetchAll()}"
						icon="pi pi-refresh" update="@form" process="@this" />

				</f:facet>

				<p:dataTable value="#{busTicketController.busTicketList}"
					var="busTicket" rows="10" paginator="true">

					<p:column headerText="Ticket ID">
						<h:outputText value="#{busTicket.ticketID}" />
					</p:column>

					<p:column headerText="Company">
						<h:outputText value="#{busTicket.company}" />
					</p:column>

					<p:column headerText="From">
						<h:outputText value="#{busTicket.fromPlace}" />
					</p:column>

					<p:column headerText="To">
						<h:outputText value="#{busTicket.toPlace}" />
					</p:column>

					<p:column headerText="Departure Time">
						<h:outputText value="#{busTicket.departureTime}">
							<f:convertDateTime pattern="dd-MM-yyyy hh:mm:ss" />
						</h:outputText>
					</p:column>

					<p:column headerText="Edit">

						<p:commandButton icon="pi pi-pencil"
							action="#{busTicketController.edit(busTicket)}" update="@form"
							process="@this" />

					</p:column>

				</p:dataTable>

			</p:panel>

		</h:form>


	</ui:define>

</ui:composition>

</html>